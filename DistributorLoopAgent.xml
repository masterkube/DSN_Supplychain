<?xml version="1.0" encoding="UTF-8"?>
<Agent>
	<AgentName>DistributorLoopAgent</AgentName>
	<Choice>
		<ChoiceOption>
            <Ask><action><actionName>PickDistributor</actionName></action><internal>true</internal></Ask>
			<OptionAction>
				<Compose>
                    <Tell><action><actionName>SharedDistributorInfo</actionName></action><internal>true</internal></Tell>
                    <Tell><action><actionName>GenSharedProductInfo</actionName></action><internal>true</internal></Tell>
                    <Tell><action><actionName>AddDistributorInventory</actionName></action><internal>true</internal></Tell>
                    <Sequence>
                        <Ask><action><actionName>GenSharedProductInfo</actionName></action><internal>true</internal></Ask>
                        <AgentCommand><AgentName>DistributorInventoryAgent</AgentName>
                            <Ask><action><actionName>AddDistributorInventory</actionName></action><internal>true</internal></Ask>
                        </AgentCommand>
                        <Tell><action><actionName>InventoryInNewDistributor</actionName></action><internal>true</internal></Tell>    
    	                <AgentCommand><AgentName>DistributorLoopAgent</AgentName></AgentCommand>
                    </Sequence>
                </Compose>
			</OptionAction>
		</ChoiceOption>
        <ChoiceOption>
            <Ask><action><actionName>PickFirstDistributor</actionName></action><internal>true</internal></Ask>
			<OptionAction>
				<Compose>
                    <Tell><action><actionName>SharedDistributorInfo</actionName></action><internal>true</internal></Tell>
                    <Tell><action><actionName>GenSharedProductInfo</actionName></action><internal>true</internal></Tell>
                    <Tell><action><actionName>AddFirstDisInventory</actionName></action><internal>true</internal></Tell>
                    <Sequence>
                        <Ask><action><actionName>GenSharedProductInfo</actionName></action><internal>true</internal></Ask>
                        <AgentCommand><AgentName>DisInvForPlantInventoryAgent</AgentName>
                            <Ask><action><actionName>AddFirstDisInventory</actionName></action><internal>true</internal></Ask>
                        </AgentCommand>
                        <Tell><action><actionName>InventoryInDistributor</actionName></action><internal>true</internal></Tell>    
				        <AgentCommand><AgentName>DistributorLoopAgent</AgentName></AgentCommand>
                    </Sequence>
                </Compose>
			</OptionAction>
		</ChoiceOption>
		<ChoiceOption>
            <Ask><action><actionName>PickDisForDistributor</actionName></action><internal>true</internal></Ask>
			<OptionAction>
				<Compose>
                    <Tell><action><actionName>SharedDistributorInfo</actionName></action><internal>true</internal></Tell>
                    <Tell><action><actionName>GenSharedProductInfo</actionName></action><internal>true</internal></Tell>
                    <Tell><action><actionName>AddDisForDistributorInventory</actionName></action><internal>true</internal></Tell>
                    <Sequence>
                        <Ask><action><actionName>GenSharedProductInfo</actionName></action><internal>true</internal></Ask>
                        <AgentCommand><AgentName>DisInvForDistributorInventoryAgent</AgentName>
                            <Ask><action><actionName>AddDisForDistributorInventory</actionName></action><internal>true</internal></Ask>
                        </AgentCommand>
                        <Tell><action><actionName>NextInventoryInDistributor</actionName></action><internal>true</internal></Tell>    
                        <AgentCommand><AgentName>DistributorLoopAgent</AgentName></AgentCommand>
                    </Sequence>
                </Compose>
			</OptionAction>
		</ChoiceOption>
	</Choice>
</Agent>